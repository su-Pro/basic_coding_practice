<p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ <code>nums</code> ï¼Œä½ éœ€è¦æ‰¾å‡ºä¸€ä¸ª <strong>è¿ç»­å­æ•°ç»„</strong> ï¼Œå¦‚æœå¯¹è¿™ä¸ªå­æ•°ç»„è¿›è¡Œå‡åºæ’åºï¼Œé‚£ä¹ˆæ•´ä¸ªæ•°ç»„éƒ½ä¼šå˜ä¸ºå‡åºæ’åºã€‚</p>

<p>è¯·ä½ æ‰¾å‡ºç¬¦åˆé¢˜æ„çš„ <strong>æœ€çŸ­</strong> å­æ•°ç»„ï¼Œå¹¶è¾“å‡ºå®ƒçš„é•¿åº¦ã€‚</p>

<p>Â </p>

<div class="original__bRMd">
<div>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>

<pre>
<strong>è¾“å…¥ï¼š</strong>nums = [2,6,4,8,10,9,15]
<strong>è¾“å‡ºï¼š</strong>5
<strong>è§£é‡Šï¼š</strong>ä½ åªéœ€è¦å¯¹ [6, 4, 8, 10, 9] è¿›è¡Œå‡åºæ’åºï¼Œé‚£ä¹ˆæ•´ä¸ªè¡¨éƒ½ä¼šå˜ä¸ºå‡åºæ’åºã€‚
</pre>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>

<pre>
<strong>è¾“å…¥ï¼š</strong>nums = [1,2,3,4]
<strong>è¾“å‡ºï¼š</strong>0
</pre>

<p><strong>ç¤ºä¾‹ 3ï¼š</strong></p>

<pre>
<strong>è¾“å…¥ï¼š</strong>nums = [1]
<strong>è¾“å‡ºï¼š</strong>0
</pre>

<p>Â </p>

<p><strong>æç¤ºï¼š</strong></p>

<ul>
	<li><code>1 <= nums.length <= 10<sup>4</sup></code></li>
	<li><code>-10<sup>5</sup> <= nums[i] <= 10<sup>5</sup></code></li>
</ul>

<p>Â </p>

<p><strong>è¿›é˜¶ï¼š</strong>ä½ å¯ä»¥è®¾è®¡ä¸€ä¸ªæ—¶é—´å¤æ‚åº¦ä¸º <code>O(n)</code> çš„è§£å†³æ–¹æ¡ˆå—ï¼Ÿ</p>
</div>
</div>
<div><div>Related Topics</div><div><li>æ ˆ</li><li>è´ªå¿ƒ</li><li>æ•°ç»„</li><li>åŒæŒ‡é’ˆ</li><li>æ’åº</li><li>å•è°ƒæ ˆ</li></div></div><br><div><li>ğŸ‘ 766</li><li>ğŸ‘ 0</li></div> 
<br>
<strong> solution: </strong>

```python3
class Solution:
    def findUnsortedSubarray(self, nums: List[int]) -> int:
        l = len(nums)

        if l == 1: return 0

        up_stk = [(nums[0], 0)]
        down_stk = [(nums[-1], l - 1)]

        break_up, break_down = l, 0

        for i in range(1, l):
            while up_stk and nums[i] < up_stk[-1][0]:
                break_up = min(break_up, up_stk.pop()[1])
            up_stk.append((nums[i], i))

        for i in range(l - 2, -1, -1):
            while down_stk and nums[i] > down_stk[-1][0]:
                break_down = max(break_down,down_stk.pop()[1])
            down_stk.append((nums[i], i))
        distance = break_down - break_up + 1
        return 0 if distance < 0 else distance



```
  